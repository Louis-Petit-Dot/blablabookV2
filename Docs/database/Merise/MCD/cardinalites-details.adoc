= CardinalitÃ©s du MCD BlaBlaBook V2 / MCD BlaBlaBook V2 Cardinalities ğŸ“Š
:toc: left
:toclevels: 3
:sectanchors:
:icons: font
:version: 2.0
:date: {docdate}

// Navigation inter-documents
link:../../README.adoc[ğŸ“š Documentation Hub] |
link:../../project/CONCEPTION-BLABLABOOKV2.adoc[ğŸ—ï¸ Architecture] |
link:cardinalites.adoc[ğŸ“‹ Summary] |
link:../../diagrams/sequence/diag-sequence.adoc[ğŸ“Š Sequence Diagrams]

// Navigation langues
<<section-fr,ğŸ‡«ğŸ‡· Version FranÃ§aise>> | <<section-en,ğŸ‡¬ğŸ‡§ğŸ‡ºğŸ‡¸ English Version>>

---

[[section-fr]]
== ğŸ‡«ğŸ‡· CardinalitÃ©s MCD BlaBlaBook V2

<<section-en,ğŸ‡¬ğŸ‡§ğŸ‡ºğŸ‡¸ Switch to English>> | ğŸ‡«ğŸ‡· *FranÃ§ais*

=== ğŸ”— Associations et CardinalitÃ©s



=== Relations d'Autorisation (RBAC)

==== AVOIR : 0-N USER â†” 0N ROLE (via USER_ROLE)

*Lecture :* Un utilisateur peut avoir 0 Ã  N rÃ´les, un rÃ´le peut Ãªtre attribuÃ© Ã  0 Ã  N utilisateurs

*Justification :*

* âœ… Un utilisateur peut n'avoir aucun rÃ´le temporairement (compte en attente)
* âœ… Un utilisateur peut avoir plusieurs rÃ´les (USER + MODERATOR)
* âœ… Un rÃ´le peut n'Ãªtre attribuÃ© Ã  personne (rÃ´le en prÃ©paration)
* âœ… Un rÃ´le peut Ãªtre partagÃ© par plusieurs utilisateurs

*ImplÃ©mentation :* EntitÃ© d'association USER_ROLE avec PK propre




==== DETENIR : 0-N ROLE â†” 0N PERMISSION (via ROLE_PERMISSION)

*Lecture :* Un rÃ´le peut detenir 0 Ã  N permissions, une permission peut Ãªtre dÃ©tenue par 0 Ã  N rÃ´les

*Justification :*

* âœ… Un rÃ´le peut Ãªtre crÃ©Ã© sans permissions (configuration progressive)
* âœ… Un rÃ´le typique a plusieurs permissions (lecture, Ã©criture, suppression)
* âœ… Une permission peut n'Ãªtre attribuÃ©e Ã  aucun rÃ´le (permission en prÃ©paration)
* âœ… Une permission peut Ãªtre partagÃ©e entre plusieurs rÃ´les

*ImplÃ©mentation :* EntitÃ© d'association ROLE_PERMISSION avec PK propre




=== Relations MÃ©tier Principale

==== POSSÃ‰DER : 0-N USER â†” 1-1 LIBRARY

*Lecture :* Un utilisateur peut ne possÃ©der aucune bibliothÃ¨que, une bibliothÃ¨que appartient Ã  1 seul utilisateur

*Justification :*

* âœ… Chaque utilisateur n'a aucune bibliothÃ¨que personnelle Ã  son inscription(RG1)
* âœ… Un utilisateur peut crÃ©er plusieurs bibliothÃ¨ques thÃ©matiques (ex: "Cuisine", "SF", "Adulte")
* âœ… Une bibliothÃ¨que appartient exclusivement Ã  un seul utilisateur
* âœ… Chaque bibliothÃ¨que peut contenir plusieurs listes de lecture organisÃ©es




=== Relations via READING_LIST (EntitÃ© d'Association)

==== Architecture Triple FK : USER + LIBRARY + BOOK â†’ READING_LIST

* *DETENIR :* 0-N USER â†” 1-1 READING_LIST
* *INCLURE :* 0-N LIBRARY â†” 1-1 READING_LIST
* *CONTENIR :* 0-N BOOK â†” 1-1 READING_LIST

*Justification Architecture :*

* âœ… *Correction dÃ©faut V1 :* Reading lists avec ownership direct USER
* âœ… *RG2 :* Une READING_LIST lie obligatoirement 1 USER + 1 LIBRARY + 1 BOOK
* âœ… *RG4 :* Chaque ajout de livre est tracÃ© (propriÃ©taire de l'entrÃ©e)
* âœ… *RG3 :* Un livre ne peut figurer qu'une fois dans une mÃªme bibliothÃ¨que
* âœ… *Organisation hiÃ©rarchique :* Chaque bibliothÃ¨que peut avoir plusieurs listes (ex: "Best sellers", "Ã€ lire", "RecommandÃ©s")



=== Relations de Contenu

==== RÃ‰DIGER : 0-N USER â†” 1-1 NOTICE

*Lecture :* Un utilisateur peut rÃ©diger 0 Ã  N avis, chaque avis est rÃ©digÃ© par 1 seul utilisateur

*Justification :*

* âœ… Un utilisateur peut ne jamais Ã©crire d'avis
* âœ… Un utilisateur actif peut Ã©crire plusieurs avis sur diffÃ©rents livres
* âœ… Chaque avis a un auteur unique pour la responsabilitÃ© et la modÃ©ration



==== COMPORTER : 0-N BOOK â†” 1-1 NOTICE

*Lecture :* Un livre peut comporter 0 Ã  N avis, chaque avis concerne 1 seul livre

*Justification :*

* âœ… Un livre peut ne comporter aucun avis (nouveau livre)
* âœ… Un livre populaire peut comporter de nombreux avis
* âœ… Chaque avis porte sur un livre spÃ©cifique




=== Relations d'Ã‰valuation

==== ATTRIBUER : 1-1 USER â†” 0-N RATE

*Justification :*

* âœ… *RG5 :* Un utilisateur ne peut attribuer qu'une note pour le mÃªme livre
* âœ… Un livre peut avoir plusieurs notes de diffÃ©rents utilisateurs
* âœ… Chaque note est attribuÃ©e par un utilisateur unique




=== Relations MÃ©tadonnÃ©es

==== Ã‰CRIRE : 1-N BOOK â†” 0N AUTHOR (via BOOK_AUTHOR)

*Lecture :* Un livre est Ã©crit par au minimum 1 auteur, un auteur peut Ã©crire 0 Ã  N livres

*Justification :*

* âœ… Chaque livre doit avoir au moins un auteur
* âœ… Un livre peut avoir plusieurs co-auteurs
* âœ… Un auteur peut ne pas avoir de livre rÃ©fÃ©rencÃ© dans le systÃ¨me
* âœ… Un auteur prolifique peut avoir Ã©crit de nombreux livres

*ImplÃ©mentation :* EntitÃ© d'association BOOK_AUTHOR avec PK propre



==== APPARTENIR : 1-N BOOK â†” 0-N GENRE (via BOOK_GENRE)

*Lecture :* Un livre appartient au minimum Ã  1 genre, un genre peut catÃ©goriser 0 Ã  N livres

*Justification :*

* âœ… Chaque livre doit avoir au moins un genre pour la classification
* âœ… Un livre peut appartenir Ã  plusieurs genres (ex: SF + Aventure)
* âœ… Un nouveau genre peut ne pas encore avoir de livres
* âœ… Un genre populaire peut catÃ©goriser de nombreux livres

*ImplÃ©mentation :* EntitÃ© d'association BOOK_GENRE avec PK propre









[[section-en]]
== ğŸ‡¬ğŸ‡§ğŸ‡ºğŸ‡¸ MCD BlaBlaBook V2 Cardinalities

<<section-fr,ğŸ‡«ğŸ‡· Passer en FranÃ§ais>> | ğŸ‡¬ğŸ‡§ğŸ‡ºğŸ‡¸ *English*

=== ğŸ”— Relations and Cardinalities
 
=== Authorization Relations (RBAC)

==== HAVE : 0-N USER â†” 0-N ROLE (via USER_ROLE)

*Reading:* A user can have 0 to N roles; a role can be assigned to 0 to N users.

*Rationale:*

* âœ… A user may have no role temporarily (account pending)
* âœ… A user can hold multiple roles (USER + MODERATOR)
* âœ… A role may be assigned to no one yet (role in preparation)
* âœ… A role can be shared by many users

*Implementation:* Association entity USER_ROLE with its own PK



==== HOLD : 0-N ROLE â†” 0-N PERMISSION (via ROLE_PERMISSION)

*Reading:* A role can hold 0 to N permissions; a permission can be held by 0 to N roles.

*Rationale:*

* âœ… A role can be created without permissions (progressive configuration)
* âœ… A typical role has several permissions (read, write, delete)
* âœ… A permission may be assigned to no role yet (permission in preparation)
* âœ… A permission can be shared across multiple roles

*Implementation:* Association entity ROLE_PERMISSION with its own PK



=== Main Business Relations

==== OWN : 0-N USER â†” 1-1 LIBRARY

*Reading:* A user can own zero libraries; a library belongs to exactly one user.

*Rationale:*

* âœ… A new user may have no personal library at signup (RG1)
* âœ… A user can create several themed libraries (e.g. "Cooking", "Sci-Fi", "Adult")
* âœ… A library belongs exclusively to a single user
* âœ… Each library can contain multiple reading lists



=== Relations via READING_LIST (Association Entity)

==== Triple FK Architecture: USER + LIBRARY + BOOK â†’ READING_LIST

* *HOLD:* 0-N USER â†” 1-1 READING_LIST
* *INCLUDE:* 0-N LIBRARY â†” 1-1 READING_LIST
* *CONTAIN:* 0-N BOOK â†” 1-1 READING_LIST

*Architecture Rationale:*

* âœ… *Fix from V1:* Reading lists now have explicit ownership by USER
* âœ… *RG2:* A READING_LIST obligatorily links 1 USER + 1 LIBRARY + 1 BOOK
* âœ… *RG4:* Each book addition is tracked (entry owner)
* âœ… *RG3:* A book may appear only once in the same library
* âœ… *Hierarchy:* Each library can have multiple lists (e.g. "Best sellers", "To read", "Recommended")



=== Content Relations

==== WRITE : 0-N USER â†” 1-1 NOTICE

*Reading:* A user can write 0 to N reviews; each review is written by exactly one user.

*Rationale:*

* âœ… A user may never write a review
* âœ… An active user can write multiple reviews on different books
* âœ… Each review has a single author for accountability and moderation



==== CONTAIN : 0-N BOOK â†” 1-1 NOTICE

*Reading:* A book can have 0 to N reviews; each review concerns exactly one book.

*Rationale:*

* âœ… A new book may have no reviews
* âœ… A popular book can have many reviews
* âœ… Each review is about a specific book




=== Rating Relations

==== ASSIGN : 1-1 USER â†” 0-N RATE

*Rationale:*

* âœ… *RG5:* A user can assign only one rating per same book
* âœ… A book can receive ratings from many different users
* âœ… Each rating is given by a single user



=== Metadata Relations

==== AUTHOR : 1-N BOOK â†” 0-N AUTHOR (via BOOK_AUTHOR)

*Reading:* A book is written by at least 1 author; an author can write 0 to N books.

*Rationale:*

* âœ… Every book must have at least one author
* âœ… A book can have multiple co-authors
* âœ… An author may have no books referenced in the system yet
* âœ… A prolific author can have written many books

*Implementation:* Association entity BOOK_AUTHOR with its own PK



==== BELONG : 1-N BOOK â†” 0-N GENRE (via BOOK_GENRE)

*Reading:* A book belongs to at least 1 genre; a genre can categorize 0 to N books.

*Rationale:*

* âœ… Each book must have at least one genre for classification
* âœ… A book can belong to several genres (e.g. Sci-Fi + Adventure)
* âœ… A new genre may have no books yet
* âœ… A popular genre can categorize many books

*Implementation:* Association entity BOOK_GENRE with its own PK

