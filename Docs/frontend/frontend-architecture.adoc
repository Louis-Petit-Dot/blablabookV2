= Architecture Frontend - BlaBlaBook V2
:toc:
:toc-title: Sommaire

== üîó Correspondance Backend ‚Üî Frontend

Cette architecture frontend est **align√©e avec le backend existant**.

[cols="1,1,2"]
|===
| Backend | Frontend Feature | Description

| `users/` + `user-roles/`
| `features/auth/` + `features/users/`
| Authentification, profils utilisateurs

| `books/` + `book-authors/` + `book-genres/`
| `features/books/`
| Catalogue livres, recherche, d√©tails

| `authors/`
| `features/authors/`
| Gestion auteurs, pages auteur

| `genres/`
| `features/genres/`
| Filtres par genre, navigation th√©matique

| `libraries/` + `book-libraries/`
| `features/libraries/`
| Biblioth√®ques personnelles (shelves multiples)

| `reading-lists/` + `book-reading-lists/`
| `features/reading-lists/`
| Listes de lecture th√©matiques

| `reviews/`
| `features/reviews/`
| Critiques litt√©raires compl√®tes

| `rates/`
| `features/rates/`
| Syst√®me de notation (√©toiles)

| `roles/` + `permissions/` + `role-permissions/`
| `features/admin/`
| Panel admin RBAC (r√¥les, permissions, mod√©ration)
|===

**Note** : Les features "discussions" et "clubs" ne sont pas dans le backend actuel (voir section Features Futures).

== üèóÔ∏è Structure du Projet

=== Organisation par Features

[source]
----
frontend/src/
‚îú‚îÄ‚îÄ assets/              # Images, icons, fonts
‚îú‚îÄ‚îÄ components/          # Composants r√©utilisables (Button, Input, Card, Modal...)
‚îú‚îÄ‚îÄ features/            # Modules m√©tier organis√©s par feature (align√©s avec backend)
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # LoginForm, RegisterForm, etc.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useAuth, useLogin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # authService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # authStore.ts (Zustand)
‚îÇ   ‚îú‚îÄ‚îÄ books/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # BookCard, BookList, BookDetail
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useBooks, useBookSearch
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # booksService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # booksStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ authors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # AuthorCard, AuthorDetail
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useAuthors
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # authorsService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # authorsStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ genres/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # GenreFilter, GenreBadge
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useGenres
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # genresService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # genresStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ libraries/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # LibraryShelf, AddToLibrary
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useLibraries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # librariesService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # librariesStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ reading-lists/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # ReadingListCard, CreateList
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useReadingLists
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # readingListsService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # readingListsStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # ReviewCard, ReviewForm, ReviewList
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useReviews
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # reviewsService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # reviewsStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ rates/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # RatingStars, RateBook
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useRates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # ratesService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # ratesStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # UserProfile, UserAvatar, UserStats
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # useUser, useUserProfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # usersService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/       # usersStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ components/  # RoleManager, PermissionTable, UserTable
‚îÇ       ‚îú‚îÄ‚îÄ hooks/       # useRoles, usePermissions
‚îÇ       ‚îú‚îÄ‚îÄ services/    # rolesService.ts, permissionsService.ts
‚îÇ       ‚îî‚îÄ‚îÄ store/       # adminStore.ts
‚îú‚îÄ‚îÄ layouts/             # Structures de pages (PublicLayout, DashboardLayout, AdminLayout)
‚îú‚îÄ‚îÄ pages/              # Pages routes (Home, Login, Dashboard, BookPage...)
‚îú‚îÄ‚îÄ hooks/              # Custom hooks globaux (useMediaQuery, useDebounce...)
‚îú‚îÄ‚îÄ services/           # Services API globaux (api.ts, interceptors.ts)
‚îú‚îÄ‚îÄ store/              # Store Zustand global (user, theme, notifications...)
‚îú‚îÄ‚îÄ styles/             # SCSS (_variables, _mixins, _fonts, global.scss)
‚îú‚îÄ‚îÄ types/              # Types TypeScript globaux
‚îú‚îÄ‚îÄ utils/              # Fonctions utilitaires (formatDate, validators...)
‚îú‚îÄ‚îÄ App.tsx
‚îú‚îÄ‚îÄ main.tsx
‚îî‚îÄ‚îÄ router.tsx          # Configuration React Router
----

== üìÑ Pages Principales

=== Zone Publique (non authentifi√©)

[cols="1,3"]
|===
| Page | Composants cl√©s

| **Home**
| Hero, FeaturedBooks, Testimonials, CTASection

| **Login**
| LoginForm (email/password, OAuth Google)

| **Register**
| RegisterForm (multistep: infos perso ‚Üí pr√©f√©rences lectures)

| **BookCatalog**
| SearchBar, FilterSidebar, BookGrid, Pagination

| **BookDetail**
| BookInfo, RatingsSummary, ReviewsList, CTALogin

| **About**
| MissionStatement, TeamSection

| **Legal**
| CGU, Politique de confidentialit√©
|===

=== Zone Authentifi√©e

[cols="1,3"]
|===
| Page | Composants cl√©s

| **Dashboard**
| ReadingStats, CurrentBooks, RecentReviews, Recommendations

| **MyLibrary**
| LibraryShelf (shelves multiples), BookFilters, SortOptions

| **MyReadingLists**
| ReadingListGrid, CreateListModal, ManageLists

| **ReadingListDetail**
| ListHeader, BookGrid, AddBooksToList, ShareList

| **MyReviews**
| ReviewsList (mes reviews), EditReview, DeleteReview

| **Profile**
| ProfileHeader, EditProfile, ReadingPreferences, AccountSettings
|===

=== Zone Admin (RBAC)

[cols="1,3"]
|===
| Page | Composants cl√©s

| **AdminDashboard**
| UserStats, BookStats, ReviewStats, ActivityTimeline

| **UserManagement**
| UserTable, SearchUsers, UserDetail, SuspendUser

| **RoleManagement**
| RoleTable, CreateRole, EditRole, DeleteRole

| **PermissionManagement**
| PermissionTable, AssignPermissions, RolePermissionsMatrix

| **UserRoleAssignment**
| UserRoleTable, AssignRoles, BulkActions

| **ContentModeration**
| ReviewQueue, ReportedReviews, ApproveReject

| **Analytics**
| Charts (users, books, reviews, rates), Export data
|===

== üß© Composants R√©utilisables

=== UI de Base

- **Button** : Primary, Secondary, Danger, Ghost, sizes, loading state
- **Input** : Text, Email, Password, TextArea, avec validation inline
- **Select** : Dropdown avec search, multiselect
- **Card** : Container g√©n√©rique avec header/footer optionnels
- **Modal** : Overlay avec animations, tailles configurables
- **Toast** : Notifications temporaires (success, error, info)
- **Badge** : Tags, labels, statuts
- **Avatar** : Photo utilisateur avec fallback initiales
- **Loader** : Spinner, skeleton screens

=== Navigation

- **Header** : Logo, nav links, user menu, notifications bell
- **Sidebar** : Menu lat√©ral pour dashboard/admin
- **Breadcrumbs** : Fil d'ariane pour navigation hi√©rarchique
- **Tabs** : Onglets pour sections multiples

=== Formulaires

- **FormField** : Wrapper avec label, error message, help text
- **SearchBar** : Recherche avec autocomplete, clear button
- **DatePicker** : S√©lection de dates (Radix UI)
- **RatingInput** : √âtoiles cliquables pour noter

=== Donn√©es

- **DataTable** : Table avec tri, filtres, pagination
- **Pagination** : Navigation entre pages de r√©sultats
- **EmptyState** : Placeholder quand pas de donn√©es
- **ErrorBoundary** : Catch erreurs React

== üîå Technologies & Biblioth√®ques

=== Core Stack

[cols="1,2,2"]
|===
| Technologie | Usage | Apprentissage requis

| **React 18**
| UI Library, hooks, Suspense
| ‚úÖ D√©j√† ma√Ætris√©

| **TypeScript**
| Type safety, interfaces, generics
| ‚ö†Ô∏è Perfectionnement

| **Vite**
| Build tool, HMR, dev server
| ‚úÖ Configuration OK

| **React Router v7**
| Routing, layouts, loaders, actions
| ‚ö†Ô∏è Nouvelles features v7

| **Axios**
| HTTP client, interceptors
| ‚úÖ D√©j√† configur√©
|===

=== State Management

[cols="1,2,2"]
|===
| Biblioth√®que | Usage | Apprentissage

| **Zustand**
| Store global (user, theme, cart...)
| üî¥ √Ä apprendre

| **React Query**
| Cache serveur, mutations, invalidation
| üî¥ √Ä apprendre (optionnel mais recommand√©)
|===

=== UI Components

[cols="1,2,2"]
|===
| Biblioth√®que | Usage | Apprentissage

| **Radix UI**
| Composants accessibles headless (Modal, Dropdown, Tabs...)
| üî¥ √Ä apprendre

| **React Hook Form**
| Gestion formulaires performante
| ‚ö†Ô∏è Basics requis

| **Zod**
| Validation sch√©mas TypeScript
| ‚ö†Ô∏è Syntaxe √† apprendre
|===

=== Styling

- **SCSS Modules** : Styles scoped par composant
- **clsx** : Conditional classnames
- Variables globales d√©j√† configur√©es

== üéØ Plan de D√©veloppement par Phases

=== Phase 1 : Fondations (Semaine 1)

**Objectifs** : Infrastructure de base, navigation, layouts

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| Router setup
| Routes publiques/priv√©es, layouts, redirections
| ‚è≥

| Layouts
| PublicLayout, DashboardLayout, AdminLayout avec Header/Sidebar
| ‚è≥

| Composants UI base
| Button, Input, Card, Modal, Loader
| ‚è≥

| Store Zustand
| authStore (user, login, logout), themeStore
| ‚è≥

| Services API
| Interceptors, error handling global
| ‚è≥
|===

**Apprentissage requis** :

- Zustand : Store creation, hooks (useStore), persist middleware
- React Router v7 : Layouts, protected routes, loaders
- Radix UI : Modal, Dropdown basics

---

=== Phase 2 : Authentification (Semaine 1-2)

**Objectifs** : Login, Register, gestion session

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| LoginForm
| Email/password, validation Zod, error handling
| ‚è≥

| RegisterForm
| Multistep form (infos ‚Üí pr√©f√©rences), validation
| ‚è≥

| Protected Routes
| Redirect si non authentifi√©, role-based access
| ‚è≥

| OAuth Google
| Int√©gration bouton Google, callback
| ‚è≥
|===

**Apprentissage requis** :

- React Hook Form + Zod : useForm, zodResolver, validation
- OAuth flow : Authorization code, tokens

---

=== Phase 3 : Catalogue & Livres (Semaine 2)

**Objectifs** : Affichage livres, recherche, d√©tails

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| BookGrid
| Affichage liste livres, lazy loading images
| ‚è≥

| BookCard
| Composant r√©utilisable (cover, titre, auteur, rating)
| ‚è≥

| SearchBar
| Recherche avec debounce, autocomplete
| ‚è≥

| FilterSidebar
| Filtres par genre, note, ann√©e
| ‚è≥

| BookDetail
| Page livre compl√®te, reviews, add to shelf
| ‚è≥
|===

**Apprentissage requis** :

- React Query (optionnel) : useQuery, cache, invalidation
- Performance : useMemo, useCallback, React.lazy

---

=== Phase 4 : Biblioth√®ques & Listes (Semaine 3)

**Objectifs** : Biblioth√®ques utilisateur, listes de lecture

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| MyLibrary
| Affichage shelves, filtres, tri
| ‚è≥

| AddToLibrary
| Modal ajout livre √† biblioth√®que, s√©lection shelf
| ‚è≥

| MyReadingLists
| Grille listes, cr√©er/√©diter/supprimer
| ‚è≥

| ReadingListDetail
| Page liste compl√®te, drag & drop order, partage
| ‚è≥
|===

**Apprentissage requis** :

- Drag & Drop : @dnd-kit/core (recommand√©)
- Zustand : Actions complexes (optimistic updates)

---

=== Phase 5 : Reviews & Ratings (Semaine 3)

**Objectifs** : Syst√®me de notes et critiques

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| RatingStars
| Composant √©toiles interactif, half-stars
| ‚è≥

| RateBook
| Modal notation rapide d'un livre
| ‚è≥

| ReviewForm
| Formulaire critique compl√®te (textarea, rating, spoiler flag)
| ‚è≥

| ReviewsList
| Affichage reviews avec pagination, filtres
| ‚è≥

| MyReviews
| Page mes reviews, √©diter, supprimer
| ‚è≥
|===

**Apprentissage requis** :

- Optimistic updates : Zustand ou React Query
- Text editor : Simple textarea ou markdown editor

---

=== Phase 6 : Dashboard & Stats (Semaine 4)

**Objectifs** : Tableau de bord avec statistiques

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| Dashboard
| Layout avec widgets (stats, livres en cours, recommandations)
| ‚è≥

| ReadingStats
| Graphiques (livres lus/mois, genres pr√©f√©r√©s, pages lues)
| ‚è≥

| RecentActivity
| Timeline activit√©s r√©centes (reviews, ajouts...)
| ‚è≥

| Profile
| √âdition profil, avatar upload, pr√©f√©rences lecture
| ‚è≥
|===

**Apprentissage requis** :

- File upload : FormData, preview, compression
- Charts : Recharts ou Chart.js

---

=== Phase 7 : Admin Panel RBAC (Semaine 4)

**Objectifs** : Gestion utilisateurs, r√¥les, permissions, mod√©ration

[cols="1,3,1"]
|===
| T√¢che | D√©tails | Statut

| AdminDashboard
| Stats globales (users, books, reviews), graphiques activit√©
| ‚è≥

| UserManagement
| DataTable utilisateurs, recherche, d√©tails, suspend/activate
| ‚è≥

| RoleManagement
| CRUD r√¥les (cr√©er, √©diter, supprimer), permissions associ√©es
| ‚è≥

| PermissionManagement
| Liste permissions, matrice r√¥les-permissions
| ‚è≥

| UserRoleAssignment
| Assigner/retirer r√¥les aux users, actions bulk
| ‚è≥

| ContentModeration
| Queue reviews signal√©es, approve/reject, ban user
| ‚è≥
|===

**Apprentissage requis** :

- DataTable complexe : Tri, filtres, pagination server-side
- Role-based rendering : Afficher UI selon permissions
- Bulk actions : S√©lection multiple, actions group√©es

== üß† Apprentissage Collaboratif

=== Zustand (State Management)

**Pourquoi** : Plus simple que Redux, moins verbose, performance optimale

**Concepts cl√©s** :

- Store : `create()` pour d√©finir state + actions
- Hooks : `useStore()` pour consommer
- Middleware : `persist()` pour localStorage, `devtools()`

**Exemple minimal** :

[source,typescript]
----
// store/authStore.ts
import { create } from 'zustand'

interface AuthStore {
  user: User | null
  token: string | null
  login: (user: User, token: string) => void
  logout: () => void
}

export const useAuthStore = create<AuthStore>((set) => ({
  user: null,
  token: null,
  login: (user, token) => set({ user, token }),
  logout: () => set({ user: null, token: null }),
}))

// Dans un composant
const { user, login, logout } = useAuthStore()
----

---

=== Radix UI (Composants Accessibles)

**Pourquoi** : Accessibilit√© WCAG 2.1 AA native, headless (tu contr√¥les le style)

**Composants prioritaires** :

- `@radix-ui/react-dialog` : Modal
- `@radix-ui/react-dropdown-menu` : Dropdowns
- `@radix-ui/react-tabs` : Onglets
- `@radix-ui/react-select` : Select accessible

**Exemple Modal** :

[source,typescript]
----
import * as Dialog from '@radix-ui/react-dialog'

<Dialog.Root>
  <Dialog.Trigger>Ouvrir</Dialog.Trigger>
  <Dialog.Portal>
    <Dialog.Overlay className="modal-overlay" />
    <Dialog.Content className="modal-content">
      <Dialog.Title>Titre</Dialog.Title>
      <Dialog.Description>Description</Dialog.Description>
      <Dialog.Close>Fermer</Dialog.Close>
    </Dialog.Content>
  </Dialog.Portal>
</Dialog.Root>
----

---

=== React Hook Form + Zod

**Pourquoi** : Performance (pas de re-renders), validation TypeScript-first

**Workflow** :

1. D√©finir sch√©ma Zod
2. Cr√©er form avec `useForm` + `zodResolver`
3. Register inputs, handle submit

**Exemple** :

[source,typescript]
----
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const loginSchema = z.object({
  email: z.string().email('Email invalide'),
  password: z.string().min(8, 'Min 8 caract√®res'),
})

type LoginForm = z.infer<typeof loginSchema>

function LoginForm() {
  const { register, handleSubmit, formState: { errors } } = useForm<LoginForm>({
    resolver: zodResolver(loginSchema),
  })

  const onSubmit = (data: LoginForm) => {
    // API call
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register('email')} />
      {errors.email && <span>{errors.email.message}</span>}

      <input {...register('password')} type="password" />
      {errors.password && <span>{errors.password.message}</span>}

      <button type="submit">Connexion</button>
    </form>
  )
}
----

== üìã Prochaines √âtapes Imm√©diates

1. **Installer les d√©pendances** :
[source,bash]
----
npm install zustand
npm install @radix-ui/react-dialog @radix-ui/react-dropdown-menu
npm install react-hook-form @hookform/resolvers/zod zod
npm install clsx
----

2. **Setup Router** : Cr√©er `router.tsx` avec routes de base

3. **Cr√©er les layouts** : PublicLayout, DashboardLayout

4. **Premier store Zustand** : authStore avec login/logout

5. **Premiers composants UI** : Button, Input, Card

== üéì Ressources d'Apprentissage

- **Zustand** : https://zustand-demo.pmnd.rs/
- **Radix UI** : https://www.radix-ui.com/primitives/docs/overview/introduction
- **React Hook Form** : https://react-hook-form.com/get-started
- **Zod** : https://zod.dev/

== ‚úÖ Validation

√Ä chaque phase, on valide :

- ‚úÖ Fonctionnel : Features marchent comme attendu
- ‚úÖ Accessible : Navigation clavier, screen readers
- ‚úÖ Responsive : Mobile, tablet, desktop
- ‚úÖ Performance : Lighthouse score > 90
- ‚úÖ Type-safe : Pas d'erreurs TypeScript

== üöÄ Features Futures (hors scope actuel)

Ces features ne sont **pas encore dans le backend**, mais pourraient √™tre ajout√©es ult√©rieurement :

=== Discussions / Forum
- Threads de discussion sur des livres ou th√®mes
- Syst√®me de commentaires imbriqu√©s
- Likes, upvotes
- Notifications en temps r√©el

=== Clubs de Lecture
- Cr√©er/rejoindre des clubs th√©matiques
- Discussions priv√©es de club
- Planning de lectures communes
- Gestion des membres (invitations, r√¥les)

=== Social Features
- Follow/unfollow d'autres lecteurs
- Feed d'activit√©s des amis
- Recommandations bas√©es sur le r√©seau
- Messages priv√©s

Pour l'instant, **se concentrer sur les 7 phases d√©finies** qui correspondent √† l'architecture backend existante.
